(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(31),r=n.n(c),i=n(9),l=n(4),o=n(2),u="/",d="/chat",j="/auth",m="/profile",b="/searchUser",h="/friends",f=n(22),x=n(18),v=n.n(x),p=n(68),O=n.n(p).a.create({baseURL:"https://klebaniuk-chat.fly.dev/",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),g=function(){return O.get("/user/generateFriendList")},y=function(){var e=Object(f.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/user/getUser");case 3:return t=e.sent,n={id:t.data._id,email:t.data.email,name:t.data.name,lastName:t.data.lastName,friends:t.data.friends,isUserLoggedIn:!0},e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(200!==(t=e.sent).status){e.next=6;break}return n=t.data.friendList,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=n(0),N=function(){return Object(S.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNavDarkDropdown","aria-controls":"navbarNavDarkDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(S.jsx)("span",{className:"navbar-toggler-icon"})})},E=function(e){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(i.b,{to:"/Chat",className:"navbar-brand",children:Object(S.jsxs)("div",{className:"d-flex flex-row mt-3",children:[Object(S.jsx)("div",{className:"me-1",children:Object(S.jsx)("img",{src:e.logo,alt:"logo",style:{height:"4vh"}})}),Object(S.jsx)("p",{children:e.value})]})})})},L=function(e){return Object(S.jsx)("li",{children:Object(S.jsx)(i.b,{to:e.path,className:"dropdown-item",children:e.value})})},_=function(e){return Object(S.jsx)("a",{className:"nav-link dropdown-toggle",href:"",id:"navbarDarkDropdownMenuLink",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:e.value})},I=function(){return Object(S.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDarkDropdown",children:Object(S.jsx)("ul",{className:"navbar-nav",children:Object(S.jsxs)("li",{className:"nav-item dropdown",children:[Object(S.jsx)(_,{value:"Navigation"}),Object(S.jsxs)("ul",{className:"dropdown-menu dropdown-menu-dark","aria-labelledby":"navbarDarkDropdownMenuLink",children:[Object(S.jsx)(L,{value:"Main",path:"/"}),Object(S.jsx)(L,{value:"Login",path:"/Auth"}),Object(S.jsx)(L,{value:"User Info",path:"/Profile"}),Object(S.jsx)(L,{value:"Friends",path:"/friends"})]})]})})})},T=n(5),D=function(e){return Object(S.jsx)("div",{className:"nav-item vh-6 vw-10 text-decoration-none",style:{opacity:e.opacity,color:"white",marginTop:"0.5vh"},children:Object(S.jsx)("h5",{children:e.email})})},R=function(e){var t=Object(a.useState)(!1),n=Object(T.a)(t,2),s=n[0],c=n[1];return Object(S.jsx)(S.Fragment,{children:s?Object(S.jsx)(i.b,{to:"/profile",className:"text-decoration-none",children:Object(S.jsx)("div",{onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:Object(S.jsx)(D,{email:e.email,opacity:"1.0"})})}):Object(S.jsx)(i.b,{to:"/profile",className:"text-decoration-none",children:Object(S.jsx)("div",{onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:Object(S.jsx)(D,{email:e.email,opacity:"0.6"})})})})},F=function(e){return Object(S.jsx)("button",{type:"submit",className:"btn btn-primary m-3 btn-lg vh-5",children:e.value})},C=function(){var e=Object(o.b)(),t=Object(l.g)(),n=function(n){n.preventDefault();var a,s=n.currentTarget;try{if(null!==s&&null!==s.searchPhraze||""!==s.searchPhraze){var c=s.searchPhraze.value.toString();(a={searchPhraze:c},O.post("/user/searchUser",a)).then((function(n){if(200===n.status){console.log(n.data.result);var a=n.data.result;e({type:"SEARCH_USERS",payload:a}),t.push(b)}})).catch((function(){e({type:"CLEAR_SEARCH_USERS"}),alert("No users found")}))}else alert("Fill the form")}catch(r){console.log(r)}};return Object(S.jsx)("div",{style:{color:"blue"},className:"",children:Object(S.jsx)("div",{className:"d-flex flex-row vh-12",children:Object(S.jsx)("form",{onSubmit:function(e){return n(e)},children:Object(S.jsxs)("div",{className:"d-flex flex-row vh-12",children:[Object(S.jsx)("div",{className:"mt-1",children:Object(S.jsx)("input",{name:"searchPhraze",type:"text",placeholder:"search user",className:"rounded bg-secondary text-white",style:{height:"5vh",marginTop:"1.5vh"},required:!0})}),Object(S.jsx)("div",{children:Object(S.jsx)(F,{value:"search"})})]})})})})},k=function(e){return Object(S.jsx)("button",{type:e.type,className:"btn btn-outline-primary m-2 btn-lg",style:{height:"6vh"},children:e.value})},U=function(){var e=Object(o.b)(),t=Object(l.g)(),n=Object(o.c)((function(e){return e.userData})),a=function(){O.get("/user/logout").then((function(){e({type:"LOGOUT"}),e({type:"CLEAR_FULFILLED_FRIENDLIST"}),e({type:"CLEAR_CURRENT_CHAT"}),e({type:"CLEAR_MESSAGE_LIST"}),t.push("/auth")}))};return Object(S.jsx)(S.Fragment,{children:n.isUserLoggedIn?Object(S.jsx)("div",{onClick:function(){a()},children:Object(S.jsx)(k,{value:"Logout",type:"button"})}):Object(S.jsx)("div",{className:"d-none",onClick:function(){a()},children:Object(S.jsx)(k,{value:"Logout",type:"button"})})})},A=n.p+"static/media/logo.85a46bba.png",M=function(){var e=Object(o.c)((function(e){return e.userData}));return Object(S.jsx)("nav",{className:"navbar sticky-top navbar-expand-lg navbar-dark bg-dark mb-0",style:{height:"10vh"},children:Object(S.jsxs)("div",{className:"container-fluid",children:[Object(S.jsx)(E,{value:"Chat",logo:A}),Object(S.jsx)(N,{}),Object(S.jsx)(I,{}),Object(S.jsx)(C,{}),e.isUserLoggedIn?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(R,{email:e.email}),Object(S.jsx)(U,{})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(R,{email:"john@doe.com"}),Object(S.jsx)(U,{}),"r"]})]})})},P=function(){return Object(S.jsx)("div",{children:Object(S.jsx)("div",{children:"Main"})})},H=n(33),q=function(e){return Object(S.jsxs)("div",{className:"d-flex flex-column justify-content-between",children:[Object(S.jsxs)("h5",{children:[e.firstname," ",e.lastname]}),Object(S.jsx)("h6",{style:{color:"gray"},children:e.email})]})},J=function(){var e=Object(f.a)(v.a.mark((function e(t){var n,a,s,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r={friendId:t},O.post("/user/getMessageList",r);case 2:return n=e.sent,a=n.data.messages,s=a.map((function(e){var t=JSON.parse(e);return{message:t.message,senderId:t.senderId,date:new Date(t.date)}})).sort((function(e,t){return t.date.getTime()-e.date.getTime()})),console.log(s),c=a.map((function(e){var t=JSON.parse(e);return{value:t.message,senderId:t.senderId,date:t.date}})),console.log(c),e.abrupt("return",c);case 9:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=Object(a.useState)(!1),n=Object(T.a)(t,2),s=n[0],c=n[1],r=Object(o.b)();return Object(S.jsx)("div",{className:"d-flex justify-content-evenly",style:{width:"".concat(e.width,"vw"),cursor:"pointer"},onClick:function(){return function(){var t={_id:e.id,name:e.firstname,lastname:e.lastname,email:e.email};r({type:"SET_CURRENT_CHAT",payload:t}),J(e.id).then((function(e){console.log(e),r({type:"SET_MESSAGE_LIST",payload:e})}))}()},children:s?Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh"),backgroundColor:"#e6e6e6"},onMouseEnter:function(){c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})})]}):Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh")},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})})]})})},z=n.p+"static/media/profilePicture.0334f4b4.png",V=function(){var e=Object(o.c)((function(e){return e.friendList}));return Object(S.jsx)("div",{className:"border-1 border-end float-start overflow-auto bg-light",style:{width:"30vw",height:"90vh"},children:e.map((function(e){if(e.friendRequestStatus&&e._id)return Object(S.jsx)("div",{children:Object(S.jsx)(G,{firstname:e.name,lastname:e.lastName,email:e.email,img:z,imgHeight:"5",height:"10",width:"30",id:e._id})},e._id)}))})},W=function(e){var t=e.isUserSender?"#1a75ff":"#f2f2f2",n=e.isUserSender?"float-end":"float-start",a=e.isUserSender?"white":"black";return Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"".concat(n),style:{width:"60%"},children:Object(S.jsx)("div",{className:"".concat(n),children:Object(S.jsx)("p",{className:"rounded-pill p-2 m-2 ps-3 pe-3",style:{backgroundColor:t,fontSize:"2.2vh",color:a},children:e.messageValue})})})})},B=function(){var e=Object(o.c)((function(e){return e.messageList})),t=Object(o.c)((function(e){return e.userData}));return Object(S.jsx)("div",{className:"border-bottom d-flex flex-column overflow-auto",style:{width:"70vw",height:"79vh"},children:function(){for(var n=[],a=e.length-1;a>=0;a--){var s=e[a];n.push(Object(S.jsx)(W,{messageValue:s.value,isUserSender:s.senderId===t.id},a))}return n}()})},K=function(){var e=Object(o.c)((function(e){return e.currentChat}));return Object(S.jsx)("div",{className:"d-flex justify-content-center align-center text-center float-end border-bottom",style:{height:"4vh",width:"70vw"},children:Object(S.jsxs)("h4",{children:[e.name," ",e.lastname]})})},Q=function(e){return Object(S.jsx)("input",{type:e.inputType,className:"form-control",name:e.name,placeholder:e.placeholder})},X=function(e){return Object(S.jsx)("button",{type:e.type,className:"btn btn-outline-success",children:Object(S.jsx)("i",{children:e.value})})},Y=function(){Object(o.b)();var e="http://localhost:8080/",t=Object(o.c)((function(e){return e.currentChat})),n=Object(o.c)((function(e){return e.userData}));return Object(S.jsx)("form",{onSubmit:function(a){return function(a){a.preventDefault();var s=a.currentTarget;if(null!==s&&null!==s.message){var c=s.message.value,r=n.id;Object(H.io)(e).emit("send message",c,r,t._id),s.message.value=""}}(a)},style:{height:"7vh"},children:Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-center",children:[Object(S.jsx)("div",{className:"d-flex flex-column justify-content-center pe-2",style:{height:"7vh",width:"61vw"},children:Object(S.jsx)(Q,{inputType:"text",name:"message",placeholder:"Send Message"})}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-center ps-2",style:{height:"7vh"},children:Object(S.jsx)(X,{type:"submit",value:"send"})})]})})},Z=function(){var e="http://localhost:8080/",t=Object(o.b)(),n=Object(o.c)((function(e){return e.currentChat})),s=Object(o.c)((function(e){return e.userData}));return Object(a.useEffect)((function(){Object(H.io)(e).on("".concat(s.id,":").concat(n._id),(function(e){t({type:"ADD_MESSAGE",payload:{value:e.message,senderId:e.senderId}})}))}),[s.id,n._id]),Object(S.jsxs)("div",{children:[Object(S.jsx)(V,{}),Object(S.jsx)(K,{}),Object(S.jsx)(B,{}),Object(S.jsx)(Y,{})]})},$=function(e){return Object(S.jsx)("input",{type:e.inputType,className:"form-control",name:e.name,placeholder:"name@example.com"})},ee=function(e){return Object(S.jsxs)("div",{className:"form-floating mb-3 w-50",children:[Object(S.jsx)($,{name:e.name,inputType:e.inputType}),Object(S.jsx)("label",{htmlFor:e.value,children:e.value})]})},te=function(){return Object(S.jsx)("input",{onClick:function(){},type:"checkbox",className:"form-check-input",id:"form-checkbox"})},ne=function(e){var t=Object(o.c)((function(e){return e.showPassword})),n=Object(o.b)();return Object(S.jsxs)("div",{className:"form-check",children:[Object(S.jsx)("div",{onClick:function(){n({type:"SET_IS_SHOW_PASSWORD",payload:!t})},children:Object(S.jsx)(te,{})}),Object(S.jsx)("label",{className:"form-check-label",htmlFor:"showPassword",children:e.value})]})},ae=function(e){var t=Object(o.b)();return Object(S.jsx)("button",{type:"button",className:"btn btn-link m-3",onClick:function(){e.setIsSignIn(!e.isSignIn),t({type:"SET_IS_SHOW_PASSWORD",payload:!1})},children:e.value})},se=function(e){return Object(S.jsx)("div",{className:"card-title",style:{fontSize:"xxx-large"},children:e.value})},ce=function(e){var t=e.value,n=e.setIsSignIn,a=Object(o.c)((function(e){return e.showPassword})),s=Object(o.b)(),c=Object(l.g)(),r=function(e){e.preventDefault();try{var t=e.currentTarget;null!==t&&null!==t.email&&null!==t.password&&(n={email:t.email.value.toString(),password:t.password.value.toString()},O.post("/user/signin",n)).then((function(e){if(200===e.status){var t={id:e.data.result._id,email:e.data.result.email,name:e.data.result.name,lastName:e.data.result.lastName,friends:e.data.result.friends,isUserLoggedIn:!0};s({type:"SET_USER_DATA",payload:t}),s({type:"SET_IS_LOGGED_IN",payload:!0}),w().then((function(e){s({type:"SET_FULFILLED_FRIENDLIST",payload:e})})),c.push("/chat")}})).catch((function(e){console.log(e)}))}catch(a){console.log(a)}var n};return Object(S.jsx)("form",{id:"signInForm",onSubmit:function(e){r(e)},children:Object(S.jsxs)("div",{className:"position-absolute w-75 d-flex align-items-center \n                justify-content-center card border-2 bg-light ",style:{fontSize:"large",left:"50%",top:"55%",transform:"translate(-50%, -50%)"},children:[Object(S.jsx)(se,{value:"Login"}),Object(S.jsx)(ee,{inputType:"email",value:"Email address",name:"email"}),a?Object(S.jsx)(ee,{value:"Password",inputType:"text",name:"password"}):Object(S.jsx)(ee,{value:"Password",inputType:"password",name:"password"}),Object(S.jsx)(ne,{value:"Show password"}),Object(S.jsx)(F,{value:"Submit"}),Object(S.jsx)("p",{children:"Don't have an account yet? Click the button down below"}),Object(S.jsx)(ae,{value:t,setIsSignIn:n,isSignIn:!0})]})})},re=function(e){var t=e.value,n=e.setIsSignIn,a=Object(o.c)((function(e){return e.showPassword})),s=Object(l.g)(),c=Object(o.b)(),r=function(e){e.preventDefault();try{var t=e.currentTarget;null!==t&&null!==t.username&&null!==t.lastName&&null!==t.email&&null!==t.password&&i(t)?(n={email:t.email.value.toString(),name:t.username.value.toString(),lastName:t.lastName.value.toString(),password:t.password.value.toString()},O.post("/user/signup",n)).then((function(e){if(200===e.status){var t={id:e.data.result._id,email:e.data.result.email,name:e.data.result.name,lastName:e.data.result.lastName,friends:e.data.result.friends,isUserLoggedIn:!0};console.log("userdata: ".concat(JSON.stringify(t))),c({type:"SET_USER_DATA",payload:t}),c({type:"SET_IS_LOGGED_IN",payload:!0}),s.push("/chat")}else console.log(e)})).catch((function(e){console.log(e)})):alert("Fill all the fields correctly")}catch(a){console.log(a)}var n},i=function(e){return e.password.value==e.confirmPassword.value};return Object(S.jsx)("form",{onSubmit:function(e){r(e)},children:Object(S.jsxs)("div",{className:"position-absolute w-75 d-flex align-items-center \n                justify-content-center card border-2 bg-light ",style:{fontSize:"large",left:"50%",top:"55%",transform:"translate(-50%, -50%)"},children:[Object(S.jsx)(se,{value:"Register"}),Object(S.jsx)(ee,{inputType:"email",value:"Email address",name:"email"}),Object(S.jsx)(ee,{inputType:"text",value:"Name",name:"username"}),Object(S.jsx)(ee,{inputType:"text",value:"Last Name",name:"lastName"}),a?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ee,{value:"Password",inputType:"text",name:"password"}),Object(S.jsx)(ee,{value:"Repeat Password",inputType:"text",name:"confirmPassword"})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ee,{value:"Password",inputType:"password",name:"password"}),Object(S.jsx)(ee,{value:"Repeat Password",inputType:"password",name:"confirmPassword"})]}),Object(S.jsx)(ne,{value:"Show password"}),Object(S.jsx)(F,{value:"Submit"}),Object(S.jsx)("p",{children:"Already have an account? Click the button down below"}),Object(S.jsx)(ae,{value:t,setIsSignIn:n,isSignIn:!1})]})})},ie=function(){var e=Object(a.useState)(!0),t=Object(T.a)(e,2),n=t[0],s=t[1];return Object(S.jsx)("div",{children:n?Object(S.jsx)(ce,{value:"Register",setIsSignIn:s}):Object(S.jsx)(re,{value:"Login",setIsSignIn:s})})},le=function(e){return Object(S.jsxs)("div",{className:"form-floating mb-3",children:[e.isDisabled?Object(S.jsx)("input",{type:"text",name:e.name,className:"form-control",placeholder:e.placeholder,disabled:!0}):Object(S.jsx)("input",{type:"text",name:e.name,className:"form-control",placeholder:e.placeholder}),Object(S.jsx)("label",{htmlFor:"floatingInput",children:e.value})]})},oe=function(e){return Object(S.jsxs)("div",{className:"d-flex flex-row align-items-center justify-content-center",children:[Object(S.jsxs)("p",{className:"mb-3 me-2",style:{width:"7vw",fontSize:"2.3vh"},children:[e.label,":"]}),Object(S.jsx)(le,{name:e.name,value:e.value,placeholder:e.value,isDisabled:e.isDisabled})]})},ue=function(e){var t=Object(a.useState)(!0),n=Object(T.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(!1),i=Object(T.a)(r,2),l=i[0],u=i[1],d=Object(a.useState)(!0),j=Object(T.a)(d,2),m=j[0],b=j[1],h=Object(o.b)(),f=Object(o.c)((function(e){return e.userData})),x=function(e){e.preventDefault(),console.log("activated");try{var t=e.currentTarget;if(null!==t&&null!==t.firstname&&null!==t.email&&null!==t.lastname){""===t.firstname.value.toString()&&(t.firstname.value=f.name),""===t.lastname.value.toString()&&(t.lastname.value=f.lastName),""===t.email.value.toString()&&(t.email.value=f.email);var n={name:t.firstname.value.toString(),email:t.email.value.toString(),lastname:t.lastname.value.toString()};(a=n,O.post("/user/updateUser",a)).then((function(e){if(200===e.status){var t={id:e.data.result._id,email:e.data.result.email,name:e.data.result.name,lastName:e.data.result.lastName,friends:e.data.result.friends,isUserLoggedIn:!0};h({type:"SET_USER_DATA",payload:t}),c(!0),b(!0),u(!1)}else 201===e.status&&(console.log(e.data.message),alert(e.data.message+" change to antoher email"))})).catch((function(e){console.log(e)}))}}catch(s){console.log(s)}var a};return Object(S.jsx)("form",{onSubmit:function(e){return x(e)},children:Object(S.jsxs)("div",{className:"d-flex  card text-center",style:{fontSize:"2vh"},children:[Object(S.jsx)("div",{className:"card-header",children:Object(S.jsx)("h1",{children:e.headerValue})}),Object(S.jsxs)("div",{className:"d-flex justify-content-center card-body",children:[Object(S.jsx)("img",{src:e.img,alt:"profile",style:{height:"30vh"}}),Object(S.jsxs)("div",{className:"d-flex justify-content-between flex-column flex-column w-50 h-full pt-2",children:[Object(S.jsx)(oe,{value:e.firstname,label:"Firstname",isDisabled:s,name:"firstname"}),Object(S.jsx)(oe,{value:e.lastname,label:"Lastname",isDisabled:s,name:"lastname"}),Object(S.jsx)(oe,{value:e.email,label:"Email",isDisabled:s,name:"email"})]})]}),Object(S.jsxs)("div",{className:"card-footer text-muted",children:[Object(S.jsx)("i",{className:"ms-5",children:e.footerValue}),Object(S.jsxs)("div",{className:"float-end",children:[m?Object(S.jsx)("button",{type:"button",className:"btn btn-outline-info me-2",onClick:function(){c(!1),b(!1),u(!0)},children:"edit"}):Object(S.jsx)("button",{type:"button",className:"btn btn-outline-info me-2 d-none",onClick:function(){c(!1),b(!1),u(!0)},children:"edit"}),l?Object(S.jsx)("button",{type:"submit",className:"btn btn-outline-primary",children:"update"}):Object(S.jsx)("button",{className:"btn btn-outline-primary",disabled:!0,children:"update"})]})]})]})})},de=function(){var e=Object(o.c)((function(e){return e.userData}));return Object(S.jsx)("div",{className:"d-flex justify-content-center align-items-center w-100 h-75",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -40%)"},children:Object(S.jsx)("div",{className:"w-75 h-75",children:Object(S.jsx)(ue,{headerValue:"Profile Data",footerValue:"klebaniukp chat template",firstname:e.name,lastname:e.lastName,email:e.email,img:z,imgHeight:"25"})})})},je=n(20),me=function(e){return Object(S.jsx)("button",{type:"button",className:"btn btn-success",disabled:!0,children:e.value})},be=function(e){return Object(S.jsx)("button",{type:"button",className:"btn btn-info",disabled:!0,children:e.value})},he=function(e){var t=Object(a.useState)(!1),n=Object(T.a)(t,2),s=n[0],c=n[1],r=Object(o.b)(),i=Object(o.c)((function(e){return e.searchResults})),l=function(){var t;(t={id:e.id},O.post("/user/sendFriendRequest",t)).then((function(t){if(200===t.status){var n=i.map((function(t){if(t._id===e.id){return Object(je.a)(Object(je.a)({},t),{},{friendRequestStatus:!1})}return Object(je.a)({},t)}));r({type:"SEARCH_USERS",payload:n})}})).catch((function(e){console.log(e)}))},u=function(){return!0===e.isFriend?Object(S.jsx)(me,{value:"friend"}):!1===e.isFriend?Object(S.jsx)(be,{value:"pending"}):null===e.isFriend?Object(S.jsx)("div",{onClick:function(){return l()},children:Object(S.jsx)(k,{type:"submit",value:"add"})}):void 0};return Object(S.jsx)("div",{className:"d-flex justify-content-evenly border border-2 mb-1 mt-1",style:{width:"".concat(e.width,"vw")},children:s?Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh"),backgroundColor:"#e6e6e6"},onMouseEnter:function(){c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})}),u()]}):Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh")},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})}),u()]})})},fe=function(){var e=Object(o.c)((function(e){return e.searchResults}));return Object(S.jsx)("div",{className:"d-flex flex-wrap flex-column justify-content-center align-item-center m-auto",style:{width:"100vw"},children:function(){for(var t=[],n=0;n<e.length;n++){var a=Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"d-flex flex-row justify-content-center",children:Object(S.jsx)(he,{img:z,width:"50",height:"10",imgHeight:"6",firstname:e[n].name,lastname:e[n].lastName,email:e[n].email,isFriend:e[n].friendRequestStatus,id:e[n]._id,index:n})})},e[n]._id);t.push(a)}return window.scrollTo(0,0),t}()})},xe=function(e){return Object(S.jsx)("button",{type:"button",className:"btn btn-danger",children:e.value})},ve=function(){return Object(S.jsx)("button",{type:"button",className:"btn btn-outline-danger",children:Object(S.jsx)("i",{children:"reject"})})},pe=function(e){var t=Object(a.useState)(!1),n=Object(T.a)(t,2),s=n[0],c=n[1],r=Object(o.b)(),i=function(t){var n;(n={friendId:e.id,finalStatus:t},O.post("/user/manageFriendRequest",n)).then((function(e){200===e.status&&g().then((function(e){if(200===e.status){var t=e.data.friendList;t.length>0?r({type:"SET_FULFILLED_FRIENDLIST",payload:t}):r({type:"SET_FULFILLED_FRIENDLIST",payload:[]})}})).catch((function(e){console.log(e)}))}))},l=function(){var t;(t={friendId:e.id},O.post("/user/removeFriend",t)).then((function(e){200===e.status&&g().then((function(e){if(200===e.status){var t=e.data.friendList;t.length>0?r({type:"SET_FULFILLED_FRIENDLIST",payload:t}):r({type:"SET_FULFILLED_FRIENDLIST",payload:[]})}})).catch((function(e){console.log(e)}))}))},u=function(){return e.friendRequestStatus?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:Object(S.jsx)(me,{value:"friend"})}),Object(S.jsx)("div",{onClick:function(){return l()},children:Object(S.jsx)(xe,{value:"delete"})})]}):e.isUserSender?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:Object(S.jsx)(be,{value:"pending"})}),Object(S.jsx)("div",{onClick:function(){return i(!1)},children:Object(S.jsx)(xe,{value:"cancel"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{onClick:function(){return i(!0)},children:Object(S.jsx)(X,{type:"button",value:"accept"})}),Object(S.jsx)("div",{onClick:function(){return i(!1)},children:Object(S.jsx)(ve,{})})]})};return Object(S.jsx)("div",{className:"d-flex justify-content-evenly border border-2 mb-1 mt-1",style:{width:"".concat(e.width,"vw")},children:s?Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh"),backgroundColor:"#e6e6e6"},onMouseEnter:function(){c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})}),u()]}):Object(S.jsxs)("div",{className:"d-flex flex-row justify-content-evenly align-items-center",style:{width:"".concat(e.width,"vw"),height:"".concat(e.height,"vh")},onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)},children:[Object(S.jsx)("img",{style:{height:"".concat(e.imgHeight,"vh")},className:"rounded-circle",src:e.img,alt:"profile picture"}),Object(S.jsx)("div",{className:"d-flex flex-column justify-content-between w-50",children:Object(S.jsx)(q,{firstname:e.firstname,lastname:e.lastname,email:e.email})}),u()]})})},Oe=function(){var e=Object(o.c)((function(e){return e.userData})),t=Object(o.c)((function(e){return e.friendList}));return Object(S.jsx)("div",{className:"d-flex flex-column justify-content \n            center card w-50 h-100 align-items-center overflow-auto m-auto",children:t.map((function(t){return console.log(t),Object(S.jsx)("div",{children:Object(S.jsx)(pe,{firstname:t.name,lastname:t.lastName,email:t.email,img:z,imgHeight:"6",width:"50",height:"10",isUserSender:t.senderId===e.id,friendRequestStatus:t.friendRequestStatus,id:t._id})},t.email)}))})},ge=function(){var e=Object(o.b)();return Object(a.useEffect)((function(){w().then((function(t){e({type:"SET_FULFILLED_FRIENDLIST",payload:t})}))}),[]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(Oe,{})})},ye=function(){var e=Object(o.b)();Object(o.c)((function(e){return e.userData}));return Object(a.useEffect)((function(){y().then((function(t){t&&e({type:"SET_USER_DATA",payload:t})})),w().then((function(t){e({type:"SET_FULFILLED_FRIENDLIST",payload:t})}))}),[]),Object(S.jsx)(i.a,{children:Object(S.jsxs)("div",{children:[Object(S.jsx)(M,{}),Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{exact:!0,path:u,component:P,children:Object(S.jsx)(l.a,{to:j})}),Object(S.jsx)(l.b,{exact:!0,path:d,component:Z}),Object(S.jsx)(l.b,{exact:!0,path:j,component:ie}),Object(S.jsx)(l.b,{exact:!0,path:m,component:de}),Object(S.jsx)(l.b,{exact:!0,path:b,component:fe}),Object(S.jsx)(l.b,{exact:!0,path:h,component:ge})]})]})})},we=n(70),Se=n(12),Ne=n(71),Ee=Object(Se.b)({searchResults:function(e,t){try{switch(t.type){case"SEARCH_USERS":return t.payload;case"CLEAR_SEARCH_USERS":return[{_id:"x",email:"example@gmail.com",name:"Example",lastName:"Friend",friendRequestStatus:null}];default:return e||[{_id:"x",email:"example@gmail.com",name:"Example",lastName:"Friend",friendRequestStatus:null}]}}catch(n){console.log(n)}},userData:function(e,t){try{switch(t.type){case"SET_USER_DATA":return t.payload;case"LOGOUT":return{id:"x",email:"John@Doe.com",name:"John",lastName:"Doe",friends:[{id:"1039274",friendRequestStatus:!1,senderId:"1039274"}],isUserLoggedIn:!1};default:return e||{id:"x",email:"John@Doe.com",name:"John",lastName:"Doe",friends:[{id:"1039274",friendRequestStatus:!1,senderId:"1039274"}],isUserLoggedIn:!1}}}catch(n){console.log(n)}},friendList:function(e,t){try{switch(t.type){case"SET_FULFILLED_FRIENDLIST":return t.payload;case"CLEAR_FULFILLED_FRIENDLIST":return[{email:"John@Doe.com",name:"John",lastName:"Doe",friendRequestStatus:!0,senderId:"not-real-id"}];default:return e||[{email:"John@Doe.com",name:"John",lastName:"Doe",friendRequestStatus:!0,senderId:"not-real-id"}]}}catch(n){console.log(n)}},showPassword:function(e,t){try{return"SET_IS_SHOW_PASSWORD"===t.type&&t.payload}catch(n){console.log(n)}},currentChat:function(e,t){try{switch(t.type){case"SET_CURRENT_CHAT":return t.payload;case"CLEAR_CURRENT_CHAT":return{_id:"",name:"",lastname:"",email:""};default:return e||{_id:"",name:"",lastname:"",email:""}}}catch(n){console.log(n)}},messageList:function(e,t){try{switch(t.type){case"SET_MESSAGE_LIST":return t.payload;case"ADD_MESSAGE":return[t.payload].concat(Object(Ne.a)(e));case"CLEAR_MESSAGE_LIST":return[{value:"",senderId:"",date:""}];default:return e||[{value:"",senderId:"",date:""}]}}catch(n){console.log(n)}}}),Le=Object(we.a)({reducer:Ee}),_e=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};n(128),n(129);r.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(o.a,{store:Le,children:Object(S.jsx)(ye,{})})}),document.getElementById("root")),_e()}},[[136,1,2]]]);
//# sourceMappingURL=main.d9c0a70d.chunk.js.map